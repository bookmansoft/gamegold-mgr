# 操作员管理功能描述

## 注册流程

1. 用户在登录页面点击'注册账户'，跳转至注册页面，输入用户名(合法邮箱地址)、密码/确认密码、手机号，并点击'获取验证码'，将收到系统下发的手机验证码
2. 用户录入验证码，点击'提交注册'，成功注册后，将跳转至'注册成功'通知页面，点击'返回首页'即可跳转至业务主界面
3. 用户注册成功后，系统将使用 nodemailer 向用户发送注册成功邮件，包括注册用户名、用户权限等说明

## 登录流程

1. 用户访问登录页面时，可以选择账户密码登录，或者手机号登录两种方式
    1.1 账户密码登录：输入注册时提交的账户名/密码对，即可登录系统。
        1.1.1 忘记密码：在该页面上填写账户名、点击'忘记密码'链接，系统将发送一封重置密码邮件，用户可以凭邮件中包含的新密码登录
    1.2 手机号登录：输入手机号码，点击'获取验证码'，输入收到的验证码后提交，即可登录系统。在该页面上不需要输入密码，也没有'忘记密码'的选项
2. 如果用户在登录系统时，勾选了'自动登录'，系统将在用户成功登录后，将登录令牌缓存在Cookie中，下次用户访问登录页面时，会自动使用登录令牌登录，直至令牌失效
3. 登录成功后，用户可以修改自己的登录密码(需要输入旧的密码)
4. 考虑到安全隐私问题，本期不面向普通操作员提供修改手机号码的功能。超级管理员可以帮助用户修改密码和手机号码
5. 用户签退后，系统将删除Cookie，下次登录重新凭用户名/密码或者手机号码/验证码登录

总体来说，以用户注册时使用的邮箱地址为基本验证方式，手机号码作为从属的快捷登录和备用登录方式

## 用户权限

1. 系统将用户分为 admin user guest 三个类型, 在用户登录时，将身份信息填写于 currentAuthority 字段上下发，形如 ['admin', 'user'] 或 ['user']
2. admin 即管理员可以针对 user 进行管理，包括账号停用/恢复、修改密码、修改手机号码等，但不能彻底删除帐号。系统运行之初，第一个注册的用户，自动成为系统管理员
3. user 为普通操作员，需要自行注册，登录后使用自己的账号信息单独连接全节点，在自己账户范围内执行业务操作，如注册CP、发起众筹、获客等
4. guest 无需注册，仅能简单浏览限定页面，不能执行任何业务操作

# Cookie管理

使用 js-cookie 组件，进行基于客户端的 Cookie 管理

附录 - js-cookie 简明教程
```js
// 设置Cookie
Cookies.set('name', 'value');                   //设置一个命名Cookie
Cookies.set('name', 'value', { expires: 7 });   //设置一个命名Cookie，指定有效期7天 Default 0
Cookies.set('name', 'value', { path: '' });     //设置一个命名Cookie，指定路径 Default: /

// 读取指定名称的Cookie
Cookies.get('name'); 

// 读取全部Cookie：返回包含所有Cookie的对象如 { name: 'value' }
Cookies.get();

// 移除Cookie
Cookies.remove('name');                 //删除未设置路径的Cookie
Cookies.remove('name', { path: '' });   //删除精准匹配名称和路径的Cookie

// JSON
Cookies.set('name', { foo: 'bar' });
Cookies.get('name');                    // => '{"foo":"bar"}'
Cookies.getJSON('name');                // => { foo: 'bar' }
```

客户端 Cookie 的内容，将视情况，作为上行请求的有效参数

# SaaS

系统将升级为Saas服务，向公众开放服务
